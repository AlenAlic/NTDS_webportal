{% extends "base.html" %}
{% import 'my_wtf.html' as my_wtf %}

{% block app_content %}

{% if ts.main_raffle_result_visible is sameas true %}
<h3>Bus to Brno</h3>
{% if add_overview is sameas false %}
<p>Team Düsseldorf is organizing a bus that will travel to Brno for the ETDS.</p>
<p>The bus will take a route from Eindhoven, Maastricht, Aachen, Bonn, Düsseldorf, Dortmund, Münster, Bielefeld, Hildesheim, Clausthal and Cottbus to Brno.</p>
<p>Select dancers want to make use of this option.</p>
<p>If there are any questions about this, please contact the teamcaptain of team Düsseldorf.</p>
<a class="btn btn-warning" href="mailto:{{tc_dusseldorf.email}}?SUBJECT=Bus to ETDS Brno">Send email to the teamcaptain of team Düsseldorf</a>
{% else %}
<p>Click the dropdown below to see a list of people that would like to use the bus option to Brno.</p>
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
    <div class="panel panel-default">
        <div class="panel-heading" role="button" id="headingOne" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
            <b class="panel-title">Dancers that want to use the bus to Brno {% if included_dancers|length > 0 %}<span class="badge">{{ included_dancers|length }}</span>{% endif %}</b>
        </div>
        <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
            {% if included_dancers|length > 0 %}
            <table class="table list-group">
                <colgroup>
                    <col span="1" style="width: 30%;">
                    <col span="1" style="width: 40%;">
                    <col span="1" style="width: 30%;">
                </colgroup>
                <thead>
                    <tr>
                        <th><b>Dancer</b></th>
                        <th><b>Email</b></th>
                        <th><b>Team</b></th>
                    </tr>
                </thead>
                <tbody>
                {% for dancer in included_dancers %}
                    <tr>
                        <td>
                            {{ dancer.get_full_name() }}
                        </td>
                        <td>
                            {{ dancer.email }}
                        </td>
                        <td>
                            {{ dancer.contestant_info[0].team.city }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}
<form method="POST" enctype="multipart/form-data" novalidate>
    {% if confirmed_dancers|length > 0 %}
    <table class="table table-striped table-clickable-checkbox">
        <colgroup>
            <col span="1" style="width: 80%;">
            <col span="1" style="width: 20%;">
        </colgroup>
        <thead>
            <tr>
                <th><b>Dancer</b></th>
                <th style="text-align:right"><b></b></th>
            </tr>
        </thead>
        <tbody>
        {% for dancer in confirmed_dancers %}
            <tr class="checkbox-row {% if dancer.additional_info[0].bus_to_brno == true %}success{% endif %}">
                <td>
                    {{ dancer.get_full_name() }}
                </td>
                <td align="right">
                    <input class="checkbox" type="checkbox" value="y" id="{{ dancer.contestant_info[0].number }}" name="{{ dancer.contestant_info[0].number }}" {% if dancer.additional_info[0].bus_to_brno == true %}checked{% endif %}>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    <input class="btn btn-primary" id="submit" name="submit" type="submit" value="Save changes">
</form>
{% else %}
<h2>The raffle has not taken place yet.</h2>
{% endif %}

{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function($) {
    $(".checkbox").change(function() {
        $(this).parents("tr:first").toggleClass('info ');
    });
});
</script>
{% endblock %}
