{% import 'registration_wtf.html' as reg_wtf %}
{% if mode == 'edit' %}
{% set editable = not (dancer.status_info[0].status == data.SELECTED or dancer.status_info[0].status == data.CONFIRMED) %}
{% else %}
{% set editable = true %}
{% endif %}

<h2>{{title}}</h2>
<form class="form-horizontal" method="POST" enctype="multipart/form-data" novalidate>
    {{ form.hidden_tag() }}
    {{ form.csrf_token }}
    <h3>Personal information</h3>
    <!--{{ reg_wtf.form_field(form.team) }}-->
    {% if mode == 'register' %}
        {{ reg_wtf.form_field(form.number) }}
        {{ reg_wtf.form_field(form.first_name, placeholder='First name') }}
        {{ reg_wtf.form_field(form.prefixes, placeholder='Prefix') }}
        {{ reg_wtf.form_field(form.last_name, placeholder='Last name') }}
    {% elif mode == 'edit' %}
        <div class="form-group  required">
            <label class="control-label  col-xs-2" for="full_name">Full name</label>
            <div class="col-xs-10">
                <div class="input-group">
                    <input class="form-control" disabled="" id="full_name" name="full_name" placeholder="Full name" required="" type="text" value="{{form.full_name.data}}">
                    <a href="{{url_for('teamcaptains.name_change_request', contestant=dancer.contestant_id, wide=wide)}}" class="glyphicon glyphicon-pencil input-group-addon"></a>
                </div>
            </div>
        </div>
    {% endif %}
    {{ reg_wtf.form_field(form.email, placeholder='E-mail address') }}
    {{ reg_wtf.form_field(form.student) }}
    {{ reg_wtf.form_field(form.first_time) }}
    {{ reg_wtf.form_field(form.sleeping_arrangements) }}
    <!--{{ reg_wtf.form_field(form.diet_allergies, placeholder='Please fill in any special dietary requirements and/or allergies.') }}-->

    <h3>Ballroom</h3>
    {% if editable is sameas true %}
        {{ reg_wtf.form_field(form.ballroom_level, disabled=not editable, **{'onchange': "dancingLevelGreyOut(id, 'ballroom_role', 'ballroom_partner', 'ballroom_blind_date')"}) }}
    {% else %}
        {{ reg_wtf.form_field(form.ballroom_level, disabled=not editable) }}
    {% endif %}
    {{ reg_wtf.form_field(form.ballroom_role, disabled=not editable) }}
    <!--{{ reg_wtf.form_field(form.ballroom_blind_date, disabled=not editable) }}-->
    {{ reg_wtf.form_field(form.ballroom_partner, disabled=not editable) }}

    <h3>Latin</h3>
    {% if editable is sameas true %}
        {{ reg_wtf.form_field(form.latin_level, disabled=not editable, **{'onchange': "dancingLevelGreyOut(id, 'latin_role', 'latin_partner', 'latin_blind_date')"} ) }}
    {% else %}
        {{ reg_wtf.form_field(form.latin_level, disabled=not editable) }}
    {% endif %}
    {{ reg_wtf.form_field(form.latin_role, disabled=not editable) }}
    <!--{{ reg_wtf.form_field(form.latin_blind_date, disabled=not editable) }}-->
    {{ reg_wtf.form_field(form.latin_partner, disabled=not editable) }}

    <!--<h3>Volunteering</h3>-->
    <!--{{ reg_wtf.form_field(form.volunteer) }}-->
    <!--{{ reg_wtf.form_field(form.first_aid) }}-->

    <h3>Adjudication</h3>
    {{ reg_wtf.form_field(form.jury_ballroom) }}
    {{ reg_wtf.form_field(form.license_jury_ballroom) }}
    {{ reg_wtf.form_field(form.jury_latin) }}
    {{ reg_wtf.form_field(form.license_jury_latin) }}
    {{ reg_wtf.form_field(form.jury_salsa) }}
    {{ reg_wtf.form_field(form.jury_polka) }}
    <h3>Merchandise</h3>
    {{ reg_wtf.form_field(form.t_shirt, disabled=(timestamp > data.tournament_settings['merchandise_closing_date'])) }}
    <div class="form-group  required">
        <label class="control-label col-xs-2" ></label>
        <div class="col-xs-10"><b>Please select the quantity of any stickers you would like to buy (<a href="http://178.62.251.214/etds/index.php/merchandising/" target="_blank">see website</a>) - {{ data.euros(data.STICKER_PRICE) }} a piece</b></div>
    </div>
    {#
    <!--{% for merch in merchandise %}-->
        <!--{% with merch=merch %}-->
            <!--{% include 'teamcaptains/_merchandise.html' %}-->
        <!--{% endwith %}-->
    <!--{% endfor %}--> #}
    {{ reg_wtf.form_field(form.AliceinWonderland, placeholder='E-mail address') }}
    {{ reg_wtf.form_field(form.Avatar) }}
    {{ reg_wtf.form_field(form.HarryPotter) }}
    {{ reg_wtf.form_field(form.IndianaJones) }}
    {{ reg_wtf.form_field(form.LordoftheRings) }}
    {{ reg_wtf.form_field(form.Matrix) }}
    {{ reg_wtf.form_field(form.PiratesoftheCaribean) }}
    {{ reg_wtf.form_field(form.StarTrek) }}
    {{ reg_wtf.form_field(form.StarWars) }}
    {% if mode == 'register' %}
    <div class="form-group required">
        <div class="col-xs-offset-2 col-xs-10">
            <div class="checkbox">
                <label>
                    <input id="privacy_checkbox" name="privacy_checkbox" type="checkbox" value="y">I have read the <a data-toggle="modal" data-target="#privacy-modal">privacy notice</a> and give consent for the processing of my personal data, as well as the <a href="http://178.62.251.214/etds/index.php/registrations/" target="_blank">terms</a> stated on the tournament site
                </label>
            </div>
        </div>
    </div>
    {% endif %}
    <div class="form-group  required">
        <label class="control-label col-xs-2" ></label>
        <div class="col-xs-10">
            <div class="input-group">
                <input class="btn btn-primary" id="submit" name="submit" type="submit" value="{% if mode == 'edit' %}Save changes{% else %}Register dancer{% endif %}">&nbsp;
                <a role="button" class="btn btn-default" href="{% if mode == 'edit' %}{{ url_for('teamcaptains.edit_dancers', wide=wide) }}{% else %}{{ url_for('main.index') }}{% endif %}">Cancel</a>
            </div>
        </div>
    </div>
    {#reg_wtf.quick_form(form)#}
</form>
<div class="modal fade" id="privacy-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog" role="document"  style="width:50%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Privacy notice</h4>
            </div>
            <div class="modal-body">
                {% include 'teamcaptains/_privacy_statement.html' %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>