{% extends "base.html" %}
{% import 'my_wtf.html' as my_wtf %}

{% block body_attribs %}
{% endblock %}

{% block app_content %}
<ul class="nav nav-tabs" id=myTabs role=tablist>
	<li role=presentation class=active>
		<a href=#overview id=overview-tab role=tab data-toggle=tab aria-controls=overview aria-expanded=true>Overview</a>
	</li>
    <li role=presentation>
        <a href=#config class=dropdown-toggle id=config-tab data-toggle=tab aria-controls=config-contents>Config</a>
    </li>
</ul>
<div class=tab-content id=myTabContent>
	<div class="tab-pane fade in active" role=tabpanel id=overview aria-labelledby=overview-tab>
        <div style="height:10px;"></div>
        {% if state.main_raffle_taken_place is sameas false %}
        <form class="form" method="POST" enctype="multipart/form-data" novalidate>
        <div class="jumbotron">
            <h2>Main raffle</h2>
            <p>Select any dancers you want to be guaranteed entry into the tournament from the list below.</p>
            <button type="submit" id="submit-start_raffle" name="start_raffle" class="btn btn-success btn-lg">Start Raffle</button>
            <button type="submit" id="submit-start_test_raffle" name="start_test_raffle" class="btn btn-danger btn-lg">Start TEST Raffle</button>
        </div>
        <table class="table table-striped table-responsive">
            <colgroup>
                <col span="1" style="width: 40%;">
                <col span="1" style="width: 40%;">
                <col span="1" style="width: 20%;">
            </colgroup>
            <thead>
                <tr>
                    <th><b>Dancer</b></th>
                    <th><b>Team</b></th>
                    <th style="text-align:right"><b>Guaranteed to be selected</b></th>
                </tr>
            </thead>
            <tbody>
            {% for dancer in all_dancers %}
                <tr class="clickable-row">
                    <td>
                        {{ dancer.get_full_name() }}
                    </td>
                    <td>
                        {{ dancer.contestant_info[0].team.name }}
                    </td>
                    <td align="right">
                        <input class="checkbox" type="checkbox" value="y" id="{{ dancer.contestant_id }}" name="{{ dancer.contestant_id }}">
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        </form>
        {% else %}
        <form class="form" method="POST" enctype="multipart/form-data" novalidate>
        <button type="submit" id="submit-reset_raffle" name="reset_raffle" class="btn btn-warning">RESET Raffle</button>
        </form>
        {% endif %}
	</div>
    <div class="tab-pane fade" role=tabpanel id=config aria-labelledby=config-tab>
        <div style="height:10px;"></div>
        <form class="form" method="POST" enctype="multipart/form-data" novalidate>
            {% for key in raffle_config %}
            {% if key in data.raffle_config_items %}
                <div class="form-group">
                    <label>{{ data.raffle_labels[key] }}</label>
                    <input type="number" class="form-control" id="{{ key }}" name="{{ key }}" value="{{ raffle_config[key] }}">
                </div>
            {% endif %}
            {% endfor %}
            <button type="submit" id="submit-raffle_config"  name="raffle_config" class="btn btn-default">Save changes</button>
        </form>
    </div>
</div>
{% endblock %}


{% block scripts %}
{{ super() }}
<script>
</script>
<script>
    $(document).ready(function($) {
    $(".checkbox").change(function() {
        $(this).parents("tr:first").toggleClass('success ');
    });
});
</script>
{% endblock %}
